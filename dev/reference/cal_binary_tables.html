<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Probability Calibration table — .cal_table_breaks • probably</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Probability Calibration table — .cal_table_breaks"><meta name="description" content="Calibration table functions. They require a data.frame that
contains the predictions and probability columns. The output is another
tibble with segmented data that compares the accuracy of the probability
to the actual outcome."><meta property="og:description" content="Calibration table functions. They require a data.frame that
contains the predictions and probability columns. The output is another
tibble with segmented data that compares the accuracy of the probability
to the actual outcome."><meta property="og:image" content="https://probably.tidymodels.org/logo.png"><meta name="robots" content="noindex"><script src="https://cdn.jsdelivr.net/gh/posit-dev/supported-by-posit/js/badge.min.js" data-max-height="43" data-light-bg="#666f76" data-light-fg="#f9f9f9"></script><script defer data-domain="probably.tidymodels.org,all.tidymodels.org" src="https://plausible.io/js/plausible.js"></script></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">probably</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.2.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/equivocal-zones.html">Equivocal zones</a></li>
    <li><a class="dropdown-item" href="../articles/where-to-use.html">Where does probably fit in?</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/tidymodels/probably/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Probability Calibration table</h1>
      <small class="dont-index">Source: <a href="https://github.com/tidymodels/probably/blob/main/R/cal-plot-breaks.R" class="external-link"><code>R/cal-plot-breaks.R</code></a>, <a href="https://github.com/tidymodels/probably/blob/main/R/cal-plot-logistic.R" class="external-link"><code>R/cal-plot-logistic.R</code></a>, <a href="https://github.com/tidymodels/probably/blob/main/R/cal-plot-windowed.R" class="external-link"><code>R/cal-plot-windowed.R</code></a></small>
      <div class="d-none name"><code>cal_binary_tables.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Calibration table functions. They require a data.frame that
contains the predictions and probability columns. The output is another
<code>tibble</code> with segmented data that compares the accuracy of the probability
to the actual outcome.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">.cal_table_breaks</span><span class="op">(</span></span>
<span>  <span class="va">.data</span>,</span>
<span>  truth <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  estimate <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .by <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  num_breaks <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  conf_level <span class="op">=</span> <span class="fl">0.9</span>,</span>
<span>  event_level <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"auto"</span>, <span class="st">"first"</span>, <span class="st">"second"</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">.cal_table_logistic</span><span class="op">(</span></span>
<span>  <span class="va">.data</span>,</span>
<span>  truth <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  estimate <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .by <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  conf_level <span class="op">=</span> <span class="fl">0.9</span>,</span>
<span>  smooth <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  event_level <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"auto"</span>, <span class="st">"first"</span>, <span class="st">"second"</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">.cal_table_windowed</span><span class="op">(</span></span>
<span>  <span class="va">.data</span>,</span>
<span>  truth <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  estimate <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .by <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  window_size <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  step_size <span class="op">=</span> <span class="va">window_size</span><span class="op">/</span><span class="fl">2</span>,</span>
<span>  conf_level <span class="op">=</span> <span class="fl">0.9</span>,</span>
<span>  event_level <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"auto"</span>, <span class="st">"first"</span>, <span class="st">"second"</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg--data">.data<a class="anchor" aria-label="anchor" href="#arg--data"></a></dt>
<dd><p>An ungrouped data frame object containing predictions and
probability columns.</p></dd>


<dt id="arg-truth">truth<a class="anchor" aria-label="anchor" href="#arg-truth"></a></dt>
<dd><p>The column identifier for the true class results
(that is a factor). This should be an unquoted column name.</p></dd>


<dt id="arg-estimate">estimate<a class="anchor" aria-label="anchor" href="#arg-estimate"></a></dt>
<dd><p>A vector of column identifiers, or one of <code>dplyr</code> selector
functions to choose which variables contains the class probabilities. It
defaults to the prefix used by tidymodels (<code>.pred_</code>). The order of the
identifiers will be considered the same as the order of the levels of the
<code>truth</code> variable.</p></dd>


<dt id="arg--by">.by<a class="anchor" aria-label="anchor" href="#arg--by"></a></dt>
<dd><p>The column identifier for the grouping variable. This should be
a single unquoted column name that selects a qualitative variable for
grouping. Default to <code>NULL</code>. When <code>.by = NULL</code> no grouping will take place.</p></dd>


<dt id="arg-num-breaks">num_breaks<a class="anchor" aria-label="anchor" href="#arg-num-breaks"></a></dt>
<dd><p>The number of segments to group the probabilities. It
defaults to 10.</p></dd>


<dt id="arg-conf-level">conf_level<a class="anchor" aria-label="anchor" href="#arg-conf-level"></a></dt>
<dd><p>Confidence level to use in the visualization. It defaults
to 0.9.</p></dd>


<dt id="arg-event-level">event_level<a class="anchor" aria-label="anchor" href="#arg-event-level"></a></dt>
<dd><p>single string. Either "first" or "second" to specify which
level of truth to consider as the "event". Defaults to "auto", which allows
the function decide which one to use based on the type of model (binary,
multi-class or linear)</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments passed to the <code>tune_results</code> object.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>

<ul><li><p><code>.cal_table_breaks()</code> - Splits the data into bins, based on the
number of breaks provided (<code>num_breaks</code>). The bins are even ranges, starting
at 0, and ending at 1.</p></li>
<li><p><code>.cal_table_logistic()</code> - Fits a logistic spline regression (GAM)
against the data. It then creates a table with the predictions based on 100
probabilities starting at 0, and ending at 1.</p></li>
<li><p><code>.cal_table_windowed()</code> - Creates a running percentage of the
probability that moves across the proportion of events.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu">.cal_table_breaks</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">segment_logistic</span>,</span></span>
<span class="r-in"><span>  <span class="va">Class</span>,</span></span>
<span class="r-in"><span>  <span class="va">.pred_good</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 10 × 6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    predicted_midpoint event_rate events total  lower  upper</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span>               0.05     0.035<span style="text-decoration: underline;">0</span>     12   343 0.020<span style="text-decoration: underline;">8</span> 0.057<span style="text-decoration: underline;">0</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span>               0.15     0.084<span style="text-decoration: underline;">1</span>      9   107 0.046<span style="text-decoration: underline;">1</span> 0.145 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span>               0.25     0.324      24    74 0.236  0.426 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span>               0.35     0.366      26    71 0.272  0.471 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span>               0.45     0.538      28    52 0.416  0.656 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span>               0.55     0.473      26    55 0.357  0.591 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span>               0.65     0.491      27    55 0.374  0.608 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span>               0.75     0.691      38    55 0.572  0.790 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span>               0.85     0.722      70    97 0.636  0.794 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span>               0.95     0.851      86   101 0.779  0.905 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">.cal_table_logistic</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">segment_logistic</span>,</span></span>
<span class="r-in"><span>  <span class="va">Class</span>,</span></span>
<span class="r-in"><span>  <span class="va">.pred_good</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 101 × 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    estimate   prob  lower  upper</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span>     0    0.021<span style="text-decoration: underline;">9</span> 0.014<span style="text-decoration: underline;">3</span> 0.033<span style="text-decoration: underline;">5</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span>     0.01 0.024<span style="text-decoration: underline;">6</span> 0.016<span style="text-decoration: underline;">5</span> 0.036<span style="text-decoration: underline;">5</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span>     0.02 0.027<span style="text-decoration: underline;">6</span> 0.019<span style="text-decoration: underline;">0</span> 0.039<span style="text-decoration: underline;">9</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span>     0.03 0.031<span style="text-decoration: underline;">0</span> 0.021<span style="text-decoration: underline;">9</span> 0.043<span style="text-decoration: underline;">7</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span>     0.04 0.034<span style="text-decoration: underline;">7</span> 0.025<span style="text-decoration: underline;">0</span> 0.047<span style="text-decoration: underline;">9</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span>     0.05 0.038<span style="text-decoration: underline;">9</span> 0.028<span style="text-decoration: underline;">6</span> 0.052<span style="text-decoration: underline;">7</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span>     0.06 0.043<span style="text-decoration: underline;">5</span> 0.032<span style="text-decoration: underline;">5</span> 0.058<span style="text-decoration: underline;">0</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span>     0.07 0.048<span style="text-decoration: underline;">7</span> 0.036<span style="text-decoration: underline;">9</span> 0.064<span style="text-decoration: underline;">0</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span>     0.08 0.054<span style="text-decoration: underline;">4</span> 0.041<span style="text-decoration: underline;">8</span> 0.070<span style="text-decoration: underline;">6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span>     0.09 0.060<span style="text-decoration: underline;">8</span> 0.047<span style="text-decoration: underline;">2</span> 0.078<span style="text-decoration: underline;">0</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 91 more rows</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">.cal_table_windowed</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">segment_logistic</span>,</span></span>
<span class="r-in"><span>  <span class="va">Class</span>,</span></span>
<span class="r-in"><span>  <span class="va">.pred_good</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 21 × 6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    predicted_midpoint event_rate events total  lower  upper</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span>              0.025     0.023<span style="text-decoration: underline;">3</span>      6   258 0.010<span style="text-decoration: underline;">8</span> 0.046<span style="text-decoration: underline;">8</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span>              0.05      0.035<span style="text-decoration: underline;">0</span>     12   343 0.020<span style="text-decoration: underline;">8</span> 0.057<span style="text-decoration: underline;">0</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span>              0.1       0.055<span style="text-decoration: underline;">9</span>      8   143 0.029<span style="text-decoration: underline;">3</span> 0.101 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span>              0.15      0.084<span style="text-decoration: underline;">1</span>      9   107 0.046<span style="text-decoration: underline;">1</span> 0.145 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span>              0.2       0.195      17    87 0.130  0.280 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span>              0.25      0.324      24    74 0.236  0.426 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span>              0.3       0.343      24    70 0.251  0.448 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span>              0.35      0.366      26    71 0.272  0.471 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span>              0.4       0.433      29    67 0.331  0.540 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span>              0.45      0.538      28    52 0.416  0.656 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 11 more rows</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/topepo" class="external-link">Max Kuhn</a>, <a href="https://github.com/DavisVaughan" class="external-link">Davis Vaughan</a>, Edgar Ruiz, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

  </div></footer></body></html>

